const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DYouU81L.js","assets/index-CCmJMWXG.js","assets/index-BXoBAPKf.css"])))=>i.map(i=>d[i]);
import{r as l,j as e,_ as de}from"./index-CCmJMWXG.js";import{p as xe}from"./pdfWorker-BfGRlZgu.js";import{S as he}from"./SEO-Dq0iYSMN.js";import{T as me}from"./ToolLayout-BRO4M_A0.js";import"./toolsData-IDNgvhJl.js";function we(){const[h,V]=l.useState(null),[W,R]=l.useState([]),[f,O]=l.useState(1),[j,se]=l.useState(0),[k,H]=l.useState(!1),[X,Y]=l.useState(!1),[y,F]=l.useState(null),[ae,$]=l.useState(!1),[D,re]=l.useState("all"),[I,C]=l.useState(""),[r,N]=l.useState(null),[K,q]=l.useState(!1),[P,le]=l.useState(null),[i,ne]=l.useState({w:0,h:0}),[d,oe]=l.useState({w:0,h:0}),S=l.useRef(),G=l.useRef(),J=l.useRef(),M=l.useRef(),T=l.useRef(null),E=l.useRef(null),L=async t=>{if(!(!t||t.type!=="application/pdf")){H(!0),C(""),V(t),R([]),F(null),N(null);try{const s=await t.arrayBuffer();T.current=s;const a=await xe.getDocument({data:new Uint8Array(s)}).promise;E.current=a,se(a.numPages),O(1);const n=[];for(let o=1;o<=a.numPages;o++){const c=await a.getPage(o),m=c.getViewport({scale:.35}),x=document.createElement("canvas");x.width=Math.round(m.width),x.height=Math.round(m.height);const p=x.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,x.width,x.height),await c.render({canvasContext:p,viewport:m}).promise,n.push({num:o,thumb:x.toDataURL("image/jpeg",.5)})}R(n),await Q(a,1)}catch(s){console.error(s),C("Error loading PDF: "+s.message)}H(!1)}},Q=async(t,s)=>{if(!S.current)return;const a=await t.getPage(s),n=J.current,o=n?n.clientWidth-40:640,c=a.getViewport({scale:1}),m=Math.min(o/c.width,680/c.height,2.5),x=a.getViewport({scale:m}),p=Math.round(x.width),b=Math.round(x.height),w=S.current;w.width=p,w.height=b,ne({w:p,h:b}),oe({w:c.width,h:c.height});const u=w.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,p,b),await a.render({canvasContext:u,viewport:x}).promise,N(null)},z=async t=>{!E.current||t<1||t>j||(O(t),await Q(E.current,t))},Z=t=>{const s=S.current.getBoundingClientRect(),a=i.w/s.width,n=i.h/s.height,o=t.touches?t.touches[0].clientX:t.clientX,c=t.touches?t.touches[0].clientY:t.clientY;return{x:Math.max(0,Math.min(i.w,(o-s.left)*a)),y:Math.max(0,Math.min(i.h,(c-s.top)*n))}},ee=t=>{t.preventDefault();const s=Z(t);le(s),q(!0),N({x:s.x,y:s.y,w:0,h:0})},te=l.useCallback(t=>{if(!K||!P)return;t.preventDefault();const s=Z(t);N({x:Math.min(P.x,s.x),y:Math.min(P.y,s.y),w:Math.abs(s.x-P.x),h:Math.abs(s.y-P.y)})},[K,P,i]),A=()=>{q(!1),N(t=>t&&t.w<8&&t.h<8?null:t)};l.useEffect(()=>{const t=G.current;if(!t||!i.w)return;t.width=i.w,t.height=i.h;const s=t.getContext("2d");if(s.clearRect(0,0,t.width,t.height),!r||r.w<2||r.h<2)return;const{x:a,y:n,w:o,h:c}=r;s.fillStyle="rgba(0,0,0,0.44)",s.fillRect(0,0,t.width,t.height),s.clearRect(a,n,o,c),s.strokeStyle="#2563eb",s.lineWidth=2,s.setLineDash([6,3]),s.strokeRect(a,n,o,c),s.setLineDash([]),s.strokeStyle="rgba(255,255,255,0.3)",s.lineWidth=1;for(let g=1;g<=2;g++)s.beginPath(),s.moveTo(a+o*g/3,n),s.lineTo(a+o*g/3,n+c),s.stroke(),s.beginPath(),s.moveTo(a,n+c*g/3),s.lineTo(a+o,n+c*g/3),s.stroke();const m=8;[[a,n],[a+o,n],[a,n+c],[a+o,n+c]].forEach(([g,ie])=>{s.fillStyle="#2563eb",s.fillRect(g-m/2,ie-m/2,m,m)});const x=d.w/i.w,p=d.h/i.h,b=`${Math.round(o*x)} × ${Math.round(c*p)} pt`;s.font="bold 12px system-ui,sans-serif";const w=s.measureText(b).width,u=a+o/2-w/2-6,v=n+c+26;s.fillStyle="#2563eb",s.roundRect?s.roundRect(u,v-15,w+12,20,4):s.rect(u,v-15,w+12,20),s.fill(),s.fillStyle="#fff",s.fillText(b,u+6,v-1)},[r,i,d]);const ce=async()=>{if(!(!r||!h||!T.current)){Y(!0),C("");try{const{PDFDocument:t}=await de(async()=>{const{PDFDocument:v}=await import("./index-DYouU81L.js");return{PDFDocument:v}},__vite__mapDeps([0,1,2])),s=await t.load(T.current.slice(0)),a=s.getPages(),n=d.w/i.w,o=d.h/i.h,c=r.x*n,m=(i.h-(r.y+r.h))*o,x=r.w*n,p=r.h*o,b=D==="all"?a.map((v,g)=>g):[f-1];b.forEach(v=>a[v].setCropBox(c,m,x,p));const w=await s.save(),u=new Blob([w],{type:"application/pdf"});F({url:URL.createObjectURL(u),name:h.name.replace(/\.pdf$/i,"_cropped.pdf"),size:u.size,count:b.length})}catch(t){C("Crop error: "+t.message)}Y(!1)}},_=t=>t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(2)} MB`,U=r?Math.round(r.w*d.w/i.w):0,B=r?Math.round(r.h*d.h/i.h):0;return e.jsxs(e.Fragment,{children:[e.jsx(he,{title:"PDF Crop Tool - Visually Crop PDF Pages Free",description:"Crop PDF pages visually. Draw crop area with mouse, preview all pages, apply to single or all pages. Free & private.",canonical:"/pdf-crop"}),e.jsx(me,{toolSlug:"pdf-crop",title:"PDF Crop",description:"Visually crop PDF pages by drawing a selection on the preview. Apply to a single page or all pages.",breadcrumb:"PDF Crop",children:e.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-4",ref:J,children:[!h&&!k&&e.jsxs("div",{className:`drop-zone group cursor-pointer ${ae?"active":""}`,onDrop:t=>{var s;t.preventDefault(),$(!1),L((s=t.dataTransfer.files)==null?void 0:s[0])},onDragOver:t=>{t.preventDefault(),$(!0)},onDragLeave:()=>$(!1),onClick:()=>{var t;return(t=M.current)==null?void 0:t.click()},children:[e.jsx("input",{ref:M,type:"file",accept:"application/pdf",className:"hidden",onChange:t=>L(t.target.files[0])}),e.jsxs("div",{className:"flex flex-col items-center gap-4 py-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-lg shadow-amber-500/25 group-hover:scale-110 transition-transform",children:e.jsx("i",{className:"fas fa-crop text-white text-3xl"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-xl font-bold text-slate-700",children:["Drop PDF here or ",e.jsx("span",{className:"text-blue-600",children:"browse"})]}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Draw crop area visually on the page preview"})]}),e.jsxs("div",{className:"flex gap-5 text-xs text-slate-400",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-mouse-pointer mr-1 text-amber-400"}),"Mouse crop"]}),e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-layer-group mr-1 text-amber-400"}),"All pages"]}),e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-lock mr-1 text-green-400"}),"100% Private"]})]})]})]}),k&&e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 flex flex-col items-center gap-4 py-20",children:[e.jsx("div",{className:"w-14 h-14 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-slate-700",children:"Loading PDF..."}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Rendering page previews..."})]})]}),h&&!k&&e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 bg-slate-50 border-b border-slate-100 flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-red-50 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-file-pdf text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 truncate max-w-[180px]",children:h.name}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:[j," page",j!==1?"s":""," · ",_(h.size)]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-white border border-slate-200 rounded-xl px-2 py-1 shadow-sm",children:[e.jsx("button",{onClick:()=>z(f-1),disabled:f<=1,className:"w-7 h-7 rounded-lg hover:bg-slate-100 disabled:opacity-30 text-slate-600 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-chevron-left text-xs"})}),e.jsxs("span",{className:"text-sm font-bold text-slate-700 px-2 min-w-[90px] text-center",children:["Page ",e.jsx("span",{className:"text-amber-600",children:f})," / ",j]}),e.jsx("button",{onClick:()=>z(f+1),disabled:f>=j,className:"w-7 h-7 rounded-lg hover:bg-slate-100 disabled:opacity-30 text-slate-600 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-chevron-right text-xs"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r&&r.w>8&&e.jsxs("button",{onClick:()=>N(null),className:"text-xs text-slate-400 hover:text-red-500",children:[e.jsx("i",{className:"fas fa-undo mr-1"}),"Clear"]}),e.jsxs("button",{onClick:()=>{V(null),R([]),F(null),N(null),C("")},className:"text-xs text-slate-400 hover:text-red-500",children:[e.jsx("i",{className:"fas fa-xmark mr-1"}),"Remove"]})]})]}),e.jsxs("div",{className:"px-5 py-2 bg-blue-50 border-b border-blue-100 text-xs text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-mouse-pointer text-blue-400"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Click and drag"})," on the page below to draw the crop area. The selected area will be ",e.jsx("strong",{children:"kept"}),"."]})]}),e.jsx("div",{className:"p-4 bg-[#e8ecf0] flex items-center justify-center min-h-[300px]",children:e.jsxs("div",{className:"relative shadow-2xl rounded-lg overflow-hidden",style:{lineHeight:0},children:[e.jsx("canvas",{ref:S,style:{display:"block",maxWidth:"100%"}}),e.jsx("canvas",{ref:G,className:"absolute top-0 left-0 w-full h-full",style:{cursor:"crosshair",touchAction:"none"},onMouseDown:ee,onMouseMove:te,onMouseUp:A,onMouseLeave:A,onTouchStart:ee,onTouchMove:te,onTouchEnd:A})]})}),r&&r.w>8&&e.jsxs("div",{className:"px-5 py-2.5 bg-amber-50 border-t border-amber-100 flex flex-wrap items-center gap-4 text-xs",children:[e.jsxs("span",{className:"text-amber-800 font-bold",children:[e.jsx("i",{className:"fas fa-crop text-amber-500 mr-1.5"}),"Selection: ",e.jsxs("span",{className:"text-blue-700",children:[U," × ",B," pt"]})]}),e.jsxs("span",{className:"text-slate-400",children:["Original: ",Math.round(d.w)," × ",Math.round(d.h)," pt"]}),e.jsxs("span",{className:"text-slate-500",children:["Keeping: ",d.w?Math.round(U/d.w*100):0,"% × ",d.h?Math.round(B/d.h*100):0,"%"]})]})]}),W.length>1&&e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 shadow-sm",children:[e.jsxs("p",{className:"text-xs font-bold text-slate-500 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-th-large text-amber-400"}),"All Pages — Click to preview"]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:W.map(t=>e.jsxs("div",{onClick:()=>z(t.num),className:`flex-shrink-0 cursor-pointer rounded-xl border-2 overflow-hidden transition-all
                        ${f===t.num?"border-amber-500 ring-2 ring-amber-200 shadow-md":"border-slate-200 opacity-60 hover:opacity-100"}`,style:{width:72},children:[e.jsx("img",{src:t.thumb,alt:`Page ${t.num}`,className:"w-full object-cover",style:{height:90}}),e.jsx("p",{className:`text-center text-[9px] py-0.5 font-bold ${f===t.num?"bg-amber-500 text-white":"bg-slate-50 text-slate-500"}`,children:t.num})]},t.num))})]}),y&&e.jsxs("div",{className:"flex items-center justify-between p-5 bg-green-50 border border-green-200 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"fas fa-circle-check text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-green-800",children:"PDF Cropped!"}),e.jsxs("p",{className:"text-xs text-green-600",children:[y.count," page",y.count>1?"s":""," · ",_(y.size)]})]})]}),e.jsxs("a",{href:y.url,download:y.name,className:"flex items-center gap-2 px-6 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold text-sm transition-all shadow-md",children:[e.jsx("i",{className:"fas fa-download"})," Download"]})]}),I&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700 flex items-start gap-2",children:[e.jsx("i",{className:"fas fa-circle-exclamation mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Error"}),e.jsx("p",{children:I})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 space-y-5 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-crop text-amber-500"})," Crop Settings"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] text-slate-400 uppercase tracking-wide mb-2 font-semibold",children:"Apply Crop To"}),e.jsx("div",{className:"space-y-2",children:[{id:"current",icon:"fa-file",label:"Current Page",sub:`Only page ${f}`},{id:"all",icon:"fa-layer-group",label:"All Pages",sub:`All ${j} pages`}].map(t=>e.jsxs("button",{onClick:()=>re(t.id),className:`w-full flex items-center gap-3 px-3 py-3 rounded-xl text-sm font-bold transition-all border-2
                        ${D===t.id?"border-amber-500 bg-amber-50 text-amber-800":"border-slate-200 bg-slate-50 text-slate-600 hover:border-amber-200"}`,children:[e.jsx("i",{className:`fas ${t.icon} ${D===t.id?"text-amber-500":"text-slate-400"}`}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{children:t.label}),e.jsx("div",{className:"text-[10px] font-normal opacity-70",children:t.sub})]})]},t.id))})]}),h&&e.jsxs("div",{className:"bg-slate-50 rounded-xl p-3.5 space-y-2",children:[e.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wide font-semibold",children:"File Info"}),[{icon:"fa-file-pdf",c:"text-red-400",l:"File",v:h.name.length>18?h.name.slice(0,16)+"…":h.name},{icon:"fa-copy",c:"text-amber-400",l:"Pages",v:j},{icon:"fa-hdd",c:"text-blue-400",l:"Size",v:_(h.size)},{icon:"fa-ruler",c:"text-green-400",l:"Dims",v:`${Math.round(d.w)} × ${Math.round(d.h)} pt`},...r&&r.w>8?[{icon:"fa-crop",c:"text-amber-500",l:"Crop",v:`${U} × ${B} pt`}]:[]].map(t=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-slate-400 flex items-center gap-1.5",children:[e.jsx("i",{className:`fas ${t.icon} ${t.c} w-3`}),t.l]}),e.jsx("span",{className:"font-semibold text-slate-700",children:t.v})]},t.l))]}),e.jsx("button",{onClick:ce,disabled:!r||r.w<8||!h||X,className:"w-full py-4 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 disabled:opacity-40 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all shadow-lg shadow-amber-500/25 flex items-center justify-center gap-2 text-sm",children:X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})," Cropping..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-crop"})," Crop ",D==="all"?`All ${j} Pages`:`Page ${f}`]})}),!r&&h&&e.jsxs("p",{className:"text-[11px] text-center text-amber-600 bg-amber-50 rounded-lg py-2",children:[e.jsx("i",{className:"fas fa-hand-pointer mr-1"}),"Draw a selection on the preview first"]}),e.jsxs("button",{onClick:()=>{var t;return(t=M.current)==null?void 0:t.click()},className:"w-full py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-600 text-sm rounded-xl transition-all font-medium",children:[e.jsx("i",{className:"fas fa-folder-open mr-1.5"}),"Upload New PDF"]}),e.jsx("input",{ref:M,type:"file",accept:"application/pdf",className:"hidden",onChange:t=>L(t.target.files[0])})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl border border-amber-100 p-4 space-y-2.5",children:[e.jsxs("h4",{className:"font-bold text-slate-700 text-sm flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-lightbulb text-amber-500"})," How To Use"]}),[["1","Upload a PDF"],["2","Navigate pages with arrows"],["3","Click & drag to draw crop area"],["4","Choose current or all pages"],["5","Crop & download"]].map(([t,s])=>e.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-amber-500 text-white text-[9px] flex items-center justify-center font-bold flex-shrink-0 mt-0.5",children:t}),s]},t))]})]})]})})]})}export{we as default};
