import{r as u,j as e}from"./index-CCmJMWXG.js";import{S as U}from"./SEO-Dq0iYSMN.js";import{T}from"./ToolLayout-BRO4M_A0.js";import"./toolsData-IDNgvhJl.js";function S(s,l,a){let i=0,d=0,b=0;const p=s.length/4;for(let n=0;n<s.length;n+=4)i+=.299*s[n]+.587*s[n+1]+.114*s[n+2];for(let n=1;n<a-1;n+=4)for(let c=1;c<l-1;c+=4){const x=(n*l+c)*4,r=((n-1)*l+c)*4,m=((n+1)*l+c)*4,o=(n*l+(c-1))*4,w=(n*l+(c+1))*4,j=.299*s[x]+.587*s[x+1]+.114*s[x+2],N=.299*s[r]+.587*s[r+1]+.114*s[r+2],y=.299*s[m]+.587*s[m+1]+.114*s[m+2],E=.299*s[o]+.587*s[o+1]+.114*s[o+2],g=.299*s[w]+.587*s[w+1]+.114*s[w+2],h=N+y+E+g-4*j;d+=h*h,b++}return{luminance:i/p,blurScore:b>0?d/b:999}}async function F(s,l){const a=s.naturalWidth,i=s.naturalHeight;l("üîç Analysing image quality...",10);const d=document.createElement("canvas");d.width=a,d.height=i;const b=d.getContext("2d");b.drawImage(s,0,0);const p=b.getImageData(0,0,a,i),{luminance:n,blurScore:c}=S(p.data,a,i),x=c<200,r=c<40,m=n<90,o=n>175,w=m?125:o?88:108,j=r?108:118,N=118,y=r?4:x?3:2,E=r?2.5:x?1.8:1.1;l(`‚öôÔ∏è Applying smart corrections... (${m?"dark":o?"overexposed":"normal"} image)`,25),await I();const g=document.createElement("canvas");g.width=a,g.height=i;const h=g.getContext("2d");h.filter=`brightness(${w}%) contrast(${j}%) saturate(${N}%)`,h.drawImage(s,0,0),h.filter="none",l(`üîß Deblurring (${r?"very blurry":x?"blurry":"sharp"}, ${y} passes)...`,40),await I();for(let v=0;v<y;v++)l(`üîß Sharpening pass ${v+1}/${y}...`,40+v*12),await I(),await R(h,g,a,i,E,v===0?1.5:1),await I();return l("‚ú® Final clarity polish...",88),await I(),await R(h,g,a,i,.6,.5),l("üíæ Encoding result...",96),await I(),new Promise(v=>g.toBlob(C=>v(URL.createObjectURL(C)),"image/jpeg",.97))}async function R(s,l,a,i,d,b){const p=s.getImageData(0,0,a,i),n=document.createElement("canvas");n.width=a,n.height=i;const c=n.getContext("2d");c.filter=`blur(${b}px)`,c.drawImage(l,0,0),c.filter="none";const x=c.getImageData(0,0,a,i),r=p.data,m=x.data;for(let o=0;o<r.length;o+=4)r[o]=Math.min(255,Math.max(0,r[o]+d*(r[o]-m[o]))),r[o+1]=Math.min(255,Math.max(0,r[o+1]+d*(r[o+1]-m[o+1]))),r[o+2]=Math.min(255,Math.max(0,r[o+2]+d*(r[o+2]-m[o+2])));s.putImageData(p,0,0)}const I=()=>new Promise(s=>setTimeout(s,0));function X(){const[s,l]=u.useState(null),[a,i]=u.useState(null),[d,b]=u.useState(!1),[p,n]=u.useState(0),[c,x]=u.useState(""),[r,m]=u.useState(null),[o,w]=u.useState(50),[j,N]=u.useState(!1),[y,E]=u.useState(!1),g=u.useRef(),h=u.useRef(),k=u.useCallback(t=>{!t||!t.type.startsWith("image/")||(l({url:URL.createObjectURL(t),file:t}),i(null),m(null),w(50))},[]);u.useEffect(()=>{s&&!a&&!d&&v()},[s]);const v=async()=>{if(s){b(!0),i(null),n(5),x("Loading image...");try{const t=new Image;t.crossOrigin="anonymous",t.src=s.url,await new Promise($=>{t.onload=$,t.onerror=$});const f=document.createElement("canvas");f.width=Math.min(t.naturalWidth,400),f.height=Math.min(t.naturalHeight,400);const D=f.getContext("2d");D.drawImage(t,0,0,f.width,f.height);const B=D.getImageData(0,0,f.width,f.height),{luminance:L,blurScore:A}=S(B.data,f.width,f.height);A<40?m({text:"Very Blurry ‚Üí Heavy deblur",color:"red"}):A<200?m({text:"Blurry detected ‚Üí Deblur processing",color:"amber"}):L<90?m({text:"Underexposed ‚Üí Brightening",color:"blue"}):L>175?m({text:"Overexposed ‚Üí Tone correction",color:"orange"}):m({text:"Good quality ‚Üí Color & sharpness boost",color:"green"});const O=await F(t,($,P)=>{x($),n(P)});i(O)}catch(t){console.error("Enhance failed:",t),x("‚ùå Error: "+t.message)}finally{b(!1),n(100),setTimeout(()=>n(0),600)}}},C=u.useCallback(t=>{if(!j||!g.current)return;const f=g.current.getBoundingClientRect(),D=t.touches?t.touches[0].clientX:t.clientX;w(Math.min(100,Math.max(0,(D-f.left)/f.width*100)))},[j]);u.useEffect(()=>{if(!j)return;const t=()=>N(!1);return window.addEventListener("mousemove",C),window.addEventListener("touchmove",C,{passive:!0}),window.addEventListener("mouseup",t),window.addEventListener("touchend",t),()=>{window.removeEventListener("mousemove",C),window.removeEventListener("touchmove",C),window.removeEventListener("mouseup",t),window.removeEventListener("touchend",t)}},[j,C]);const M={red:"bg-red-50 text-red-700 border-red-200",amber:"bg-amber-50 text-amber-700 border-amber-200",blue:"bg-blue-50 text-blue-700 border-blue-200",orange:"bg-orange-50 text-orange-700 border-orange-200",green:"bg-green-50 text-green-700 border-green-200"};return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"AI Image Enhancer - Fix Blur & Enhance Photos Free",description:"Automatically enhance and deblur photos with AI. Upload any blurry or dark photo and get a sharp, vivid result instantly. Free & private.",canonical:"/image-enhancer"}),e.jsx(T,{toolSlug:"image-enhancer",title:"AI Image Enhancer",description:"Upload any photo ‚Äî blurry, dark, or dull ‚Äî and AI instantly sharpens, brightens, and enhances it. Fully automatic. No settings needed.",breadcrumb:"Image Enhancer",children:s?e.jsxs("div",{className:"space-y-4",children:[r&&e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold border ${M[r.color]}`,children:[e.jsx("i",{className:`fas ${r.color==="green"?"fa-circle-check":"fa-triangle-exclamation"}`}),r.text]}),d&&e.jsxs("div",{className:"bg-white rounded-2xl border border-violet-100 p-5 shadow-sm space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-violet-500 border-t-transparent rounded-full animate-spin flex-shrink-0"}),e.jsx("span",{className:"text-sm font-semibold text-slate-700",children:c})]}),e.jsxs("span",{className:"text-sm font-bold text-violet-600 tabular-nums",children:[p,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-violet-500 to-indigo-500 transition-all duration-300",style:{width:`${p}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:a?"‚Üê Drag slider ¬∑ Before / After ‚Üí":d?"‚è≥ Enhancing...":"Ready"}),e.jsxs("div",{className:"flex gap-3",children:[!d&&e.jsxs("button",{onClick:v,className:"text-xs text-violet-600 hover:text-violet-800 font-medium",children:[e.jsx("i",{className:"fas fa-rotate-right mr-1"}),"Re-enhance"]}),e.jsxs("button",{onClick:()=>{var t;return(t=h.current)==null?void 0:t.click()},className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx("i",{className:"fas fa-folder-open mr-1"}),"Change"]}),e.jsxs("button",{onClick:()=>{l(null),i(null)},className:"text-xs text-red-400 hover:text-red-600",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Remove"]})]}),e.jsx("input",{ref:h,type:"file",accept:"image/*",className:"hidden",onChange:t=>k(t.target.files[0])})]}),e.jsxs("div",{ref:g,className:"relative select-none overflow-hidden bg-slate-100",style:{minHeight:380,cursor:a?"col-resize":"default"},onMouseDown:()=>a&&N(!0),onTouchStart:()=>a&&N(!0),children:[e.jsx("img",{src:s.url,alt:"Original",className:"absolute inset-0 w-full h-full object-contain pointer-events-none"}),a&&e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{clipPath:`inset(0 ${100-o}% 0 0)`},children:[e.jsx("div",{className:"absolute inset-0 bg-slate-100"}),e.jsx("img",{src:a,alt:"Enhanced",className:"absolute inset-0 w-full h-full object-contain"})]}),a&&e.jsxs("div",{className:"absolute top-0 bottom-0 z-20 pointer-events-none",style:{left:`${o}%`},children:[e.jsx("div",{className:"absolute inset-y-0 -translate-x-px w-0.5 bg-white shadow-[0_0_12px_rgba(139,92,246,0.8)]"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-10 h-10 bg-white rounded-full shadow-xl flex items-center justify-center border-2 border-violet-100",children:e.jsx("i",{className:"fas fa-arrows-left-right text-violet-500 text-xs"})})]}),e.jsx("div",{className:"absolute top-3 left-3 z-10 bg-black/60 text-white text-[11px] font-bold px-2.5 py-1 rounded-lg pointer-events-none",children:"ORIGINAL"}),a&&e.jsx("div",{className:"absolute top-3 right-3 z-10 bg-violet-600/90 text-white text-[11px] font-bold px-2.5 py-1 rounded-lg pointer-events-none",children:"‚ú® ENHANCED"}),d&&!a&&e.jsx("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white/15 backdrop-blur rounded-2xl p-6 flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 border-3 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-white font-bold text-sm text-center",children:c}),e.jsx("div",{className:"w-36 bg-white/20 rounded-full h-1.5",children:e.jsx("div",{className:"h-1.5 bg-white rounded-full transition-all",style:{width:`${p}%`}})})]})})]})]}),a&&!d&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("a",{href:a,download:`ai_enhanced_${s.file.name.replace(/\.[^.]+$/,"")}.jpg`,className:"flex-1 flex items-center justify-center gap-2 py-4 bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-700 hover:to-indigo-700 text-white font-bold rounded-2xl shadow-lg shadow-violet-500/25 transition-all text-sm",children:[e.jsx("i",{className:"fas fa-download text-base"}),"Download Enhanced Image"]}),e.jsxs("button",{onClick:()=>{l(null),i(null)},className:"px-5 bg-slate-100 hover:bg-slate-200 text-slate-600 font-semibold rounded-2xl text-sm transition-all",children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"New"]})]})]}):e.jsxs("div",{className:`drop-zone group cursor-pointer ${y?"active":""}`,style:{padding:"3.5rem 2rem"},onDrop:t=>{t.preventDefault(),E(!1),k(t.dataTransfer.files[0])},onDragOver:t=>{t.preventDefault(),E(!0)},onDragLeave:()=>E(!1),onClick:()=>{var t;return(t=h.current)==null?void 0:t.click()},children:[e.jsx("input",{ref:h,type:"file",accept:"image/*",className:"hidden",onChange:t=>k(t.target.files[0])}),e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center shadow-2xl shadow-violet-400/40 group-hover:scale-110 transition-transform duration-300",children:e.jsx("i",{className:"fas fa-wand-magic-sparkles text-white text-3xl"})}),e.jsx("div",{className:"absolute -bottom-2 -right-2 bg-green-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-full shadow",children:"AUTO AI"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-extrabold text-slate-800",children:"Upload Any Photo"}),e.jsx("p",{className:"text-slate-400 mt-1.5 text-sm",children:"AI automatically fixes blur, corrects exposure & boosts colors"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 max-w-xs w-full",children:[{icon:"fa-eye",label:"Deblurs Images",color:"from-violet-500 to-purple-600"},{icon:"fa-sun",label:"Fixes Exposure",color:"from-amber-400 to-orange-500"},{icon:"fa-droplet",label:"Boosts Colors",color:"from-pink-500 to-rose-500"}].map(t=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 text-center",children:[e.jsx("div",{className:`w-8 h-8 mx-auto mb-1.5 rounded-lg bg-gradient-to-br ${t.color} flex items-center justify-center`,children:e.jsx("i",{className:`fas ${t.icon} text-white text-xs`})}),e.jsx("p",{className:"text-[11px] font-semibold text-slate-600 leading-tight",children:t.label})]},t.label))}),e.jsxs("button",{className:"px-8 py-3 bg-gradient-to-r from-violet-600 to-indigo-600 text-white font-bold rounded-full shadow-lg shadow-violet-500/30 hover:scale-105 transition-transform text-sm",children:[e.jsx("i",{className:"fas fa-upload mr-2"}),"Choose Photo to Enhance"]}),e.jsx("p",{className:"text-xs text-slate-400",children:"Works on blurry, dark, or low-quality photos ¬∑ 100% private"})]})]})})]})}export{X as default};
