const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DYouU81L.js","assets/index-CCmJMWXG.js","assets/index-BXoBAPKf.css"])))=>i.map(i=>d[i]);
import{r as o,j as e,_ as R}from"./index-CCmJMWXG.js";import{p as _}from"./pdfWorker-BfGRlZgu.js";import{S as z}from"./SEO-Dq0iYSMN.js";import{T as E}from"./ToolLayout-BRO4M_A0.js";import"./toolsData-IDNgvhJl.js";function I(){const[r,d]=o.useState([]),[y,D]=o.useState(!1),[c,m]=o.useState(null),[C,b]=o.useState(!1),[i,P]=o.useState(null),j=o.useRef(),F=o.useCallback(async t=>{const s=Array.from(t).filter(l=>l.type==="application/pdf"),a=[];for(const l of s){let n="?",f=null;try{const p=await l.arrayBuffer(),w=await _.getDocument({data:new Uint8Array(p)}).promise;n=w.numPages;const u=await w.getPage(1),x=u.getViewport({scale:.5}),h=document.createElement("canvas");h.width=x.width,h.height=x.height;const N=h.getContext("2d");N.fillStyle="#fff",N.fillRect(0,0,x.width,x.height),await u.render({canvasContext:N,viewport:x}).promise,f=h.toDataURL("image/jpeg",.6)}catch{}a.push({file:l,name:l.name,size:l.size,pages:n,thumb:f})}d(l=>[...l,...a]),m(null)},[]),M=t=>d(s=>s.filter((a,l)=>l!==t)),v=(t,s)=>{d(a=>{const l=[...a],[n]=l.splice(t,1);return l.splice(s,0,n),l})},S=async()=>{if(!(r.length<2)){D(!0),await new Promise(t=>setTimeout(t,50));try{const{PDFDocument:t}=await R(async()=>{const{PDFDocument:n}=await import("./index-DYouU81L.js");return{PDFDocument:n}},__vite__mapDeps([0,1,2])),s=await t.create();for(const n of r){const f=await n.file.arrayBuffer(),p=await t.load(f);(await s.copyPages(p,p.getPageIndices())).forEach(u=>s.addPage(u))}const a=await s.save(),l=new Blob([a],{type:"application/pdf"});m({url:URL.createObjectURL(l),name:"merged.pdf",size:l.size})}catch(t){alert("Merge error: "+t.message)}D(!1)}},k=t=>t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(2)} MB`,g=r.reduce((t,s)=>t+(typeof s.pages=="number"?s.pages:0),0);return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"Merge PDF Files - Free Online PDF Merger",description:"Merge multiple PDF files into one with first page preview. Drag to reorder, see page counts. 100% browser-based.",canonical:"/merge-pdf"}),e.jsx(E,{toolSlug:"merge-pdf",title:"Merge PDF",description:"Combine multiple PDF files into a single document with page previews, drag reorder, and page counts.",breadcrumb:"Merge PDF",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[e.jsxs("div",{className:`drop-zone group cursor-pointer ${C&&i===null?"active":""}`,onDrop:t=>{t.preventDefault(),b(!1),i===null&&F(t.dataTransfer.files)},onDragOver:t=>{t.preventDefault(),i===null&&b(!0)},onDragLeave:()=>{i===null&&b(!1)},onClick:()=>{var t;return(t=j.current)==null?void 0:t.click()},children:[e.jsx("input",{ref:j,type:"file",multiple:!0,accept:"application/pdf",className:"hidden",onChange:t=>F(t.target.files)}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-teal-500/20 group-hover:scale-110 transition-transform",children:e.jsx("i",{className:"fas fa-object-group text-white text-2xl"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-lg font-bold text-slate-700",children:["Drop PDF files or ",e.jsx("span",{className:"text-blue-600",children:"browse"})]}),e.jsx("p",{className:"text-slate-400 text-sm mt-0.5",children:"Add multiple PDFs · First page preview · Drag to reorder"})]})]})]}),r.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-slate-50 border-b border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-bold text-slate-700",children:[r.length," files"]}),g>0&&e.jsxs("span",{className:"text-xs bg-teal-100 text-teal-700 font-bold px-2 py-0.5 rounded-full",children:[g," total pages"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{var t;return(t=j.current)==null?void 0:t.click()},className:"text-xs text-blue-600 font-medium",children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add More"]}),e.jsxs("button",{onClick:()=>{d([]),m(null)},className:"text-xs text-red-400 hover:text-red-600",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Clear All"]})]})]}),e.jsx("div",{className:"divide-y divide-slate-100",children:r.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-4 px-4 py-3 hover:bg-slate-50 transition-colors cursor-move",draggable:!0,onDragStart:()=>P(s),onDragEnd:()=>P(null),onDragOver:a=>a.preventDefault(),onDrop:a=>{a.preventDefault(),i!==null&&i!==s&&v(i,s)},children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[t.thumb?e.jsx("img",{src:t.thumb,alt:`Page 1 of ${t.name}`,className:"w-14 h-18 object-cover rounded-lg border border-slate-200 shadow-sm",style:{height:72}}):e.jsx("div",{className:"w-14 flex items-center justify-center rounded-lg border border-slate-200 bg-red-50",style:{height:72},children:e.jsx("i",{className:"fas fa-file-pdf text-red-300 text-xl"})}),e.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-5 h-5 bg-teal-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center shadow",children:s+1})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"text-xs text-slate-400",children:k(t.size)}),e.jsx("span",{className:"text-[10px] text-slate-300",children:"·"}),e.jsxs("span",{className:"text-xs text-blue-500 font-bold",children:[t.pages," page",t.pages!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),s>0&&v(s,s-1)},disabled:s===0,className:"w-7 h-7 rounded-lg bg-slate-100 hover:bg-blue-100 disabled:opacity-30 text-slate-500 text-xs flex items-center justify-center transition-all",children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),s<r.length-1&&v(s,s+1)},disabled:s===r.length-1,className:"w-7 h-7 rounded-lg bg-slate-100 hover:bg-blue-100 disabled:opacity-30 text-slate-500 text-xs flex items-center justify-center transition-all",children:e.jsx("i",{className:"fas fa-arrow-down"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),M(s)},className:"w-7 h-7 rounded-lg bg-slate-100 hover:bg-red-100 text-slate-400 hover:text-red-500 text-xs flex items-center justify-center transition-all ml-0.5",children:e.jsx("i",{className:"fas fa-xmark"})})]})]},s))})]}),r.length>=2&&!c&&e.jsx("button",{onClick:S,disabled:y,className:"w-full py-3.5 bg-gradient-to-r from-teal-500 to-emerald-600 hover:from-teal-600 hover:to-emerald-700 disabled:opacity-50 text-white font-bold rounded-xl transition-all shadow-lg shadow-teal-500/20 flex items-center justify-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})," Merging ",r.length," PDFs..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-object-group"})," Merge ",r.length," PDFs (",g," pages)"]})}),r.length===1&&e.jsxs("div",{className:"text-center py-3 text-xs text-amber-600 bg-amber-50 rounded-xl border border-amber-100",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Add at least 2 PDFs to merge"]}),c&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-circle-check text-green-500 text-xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-green-800 text-sm",children:"PDFs Merged Successfully!"}),e.jsxs("p",{className:"text-xs text-green-600",children:[r.length," files · ",g," pages · ",k(c.size)]})]})]}),e.jsxs("a",{href:c.url,download:c.name,className:"flex items-center gap-2 px-5 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-xl text-sm font-bold transition-all shadow-md",children:[e.jsx("i",{className:"fas fa-download"})," Download"]})]}),c&&e.jsxs("button",{onClick:()=>{d([]),m(null)},className:"w-full py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-600 text-sm font-medium rounded-xl transition-all",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Merge More PDFs"]}),e.jsx("div",{className:"bg-gradient-to-br from-teal-50 to-emerald-50 rounded-xl border border-teal-100 p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{icon:"fas fa-eye",text:"Page preview"},{icon:"fas fa-lock",text:"No uploads"},{icon:"fas fa-arrows-up-down",text:"Drag reorder"},{icon:"fas fa-bolt",text:"Instant merge"}].map(t=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[e.jsx("i",{className:`${t.icon} text-teal-500`})," ",t.text]},t.text))})})]})})]})}export{I as default};
