const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CnYOxJSv.js","assets/index-CCmJMWXG.js","assets/index-BXoBAPKf.css"])))=>i.map(i=>d[i]);
import{r as s,_ as se,j as e}from"./index-CCmJMWXG.js";import{S as ae}from"./SEO-Dq0iYSMN.js";import{T as re}from"./ToolLayout-BRO4M_A0.js";import"./toolsData-IDNgvhJl.js";const le=[{id:"transparent",label:"Transparent"},{id:"#ffffff",label:"White"},{id:"#000000",label:"Black"},{id:"#f1f5f9",label:"Light Grey"},{id:"#1e293b",label:"Dark Navy"},{id:"#ef4444",label:"Red"},{id:"#3b82f6",label:"Blue"},{id:"#22c55e",label:"Green"},{id:"#f59e0b",label:"Yellow"},{id:"#8b5cf6",label:"Purple"},{id:"#ec4899",label:"Pink"},{id:"#0ea5e9",label:"Sky Blue"}],G={backgroundImage:"conic-gradient(#e2e8f0 25%, white 0) 0 0 / 20px 20px"};function ne(n){return n==="transparent"?G:{backgroundColor:n}}function ue(){const[n,T]=s.useState(null),[q,w]=s.useState(null),[N,h]=s.useState(null),[i,g]=s.useState(null),[x,_]=s.useState(!1),[P,y]=s.useState(0),[$,I]=s.useState(""),[c,B]=s.useState("transparent"),[k,J]=s.useState("#6366f1"),[z,F]=s.useState(50),[R,E]=s.useState(!1),[V,L]=s.useState(!1),[W,C]=s.useState(null),H=s.useRef(null),S=s.useRef(),b=s.useRef(),D=s.useCallback(t=>{if(t){if(!t.type.startsWith("image/")){C("Please upload a valid image (JPG, PNG, WebP).");return}T({url:URL.createObjectURL(t),file:t}),w(null),h(null),g(null),C(null),F(50),B("transparent")}},[]);s.useEffect(()=>{n&&!N&&!x&&M()},[n]),s.useEffect(()=>{N&&!x&&U(N,c)},[c,N]);const K=t=>{let a=0;y(0),I(t[0]),H.current=setInterval(()=>{a=Math.min(a+1,t.length-1),I(t[a]),y(l=>Math.min(l+100/(t.length*2),90))},2e3)},X=()=>{clearInterval(H.current),y(100),setTimeout(()=>y(0),800)},U=async(t,a)=>{const l=URL.createObjectURL(t),p=l;if(a==="transparent"){g(p);return}const d=new Image;d.src=l,await new Promise(f=>{d.onload=f});const u=document.createElement("canvas");u.width=d.naturalWidth,u.height=d.naturalHeight;const o=u.getContext("2d");o.fillStyle=a,o.fillRect(0,0,u.width,u.height),o.drawImage(d,0,0),URL.revokeObjectURL(l),u.toBlob(f=>g(URL.createObjectURL(f)),"image/jpeg",.96)},M=async()=>{if(n){_(!0),C(null),K(["ðŸ“¦ Loading AI model...","ðŸ” Analyzing image...","ðŸ§  Detecting subject...","âœ‚ï¸ Segmenting edges...","ðŸŽ¨ Removing background...","âœ… Finalizing result..."]);try{const a=(await se(()=>import("./index-CnYOxJSv.js"),__vite__mapDeps([0,1,2]))).removeBackground,l=await a(n.file,{output:{format:"image/png"}});X(),h(l);const p=URL.createObjectURL(l);w(p),await U(l,c)}catch(t){console.error("[BgRemover] AI removal error:",t),X(),I("âš ï¸ AI model not available â€” using smart canvas removal...");try{await Y()}catch(a){console.error("[BgRemover] Canvas fallback error:",a),C("Background removal failed. Please try a different image or browser.")}}finally{_(!1)}}},Y=async()=>{const t=new Image;t.src=n.url,await new Promise(r=>{t.onload=r});const a=t.naturalWidth,l=t.naturalHeight,p=document.createElement("canvas");p.width=a,p.height=l;const d=p.getContext("2d");d.drawImage(t,0,0);const u=d.getImageData(0,0,a,l),o=u.data,f=(r,m)=>{const j=(m*a+r)*4;return[o[j],o[j+1],o[j+2]]},A=[f(0,0),f(a-1,0),f(0,l-1),f(a-1,l-1)],Q=A.reduce((r,m)=>r+m[0],0)/4,Z=A.reduce((r,m)=>r+m[1],0)/4,ee=A.reduce((r,m)=>r+m[2],0)/4;for(let r=0;r<o.length;r+=4){const m=Math.sqrt((o[r]-Q)**2+(o[r+1]-Z)**2+(o[r+2]-ee)**2),j=Math.min(255,Math.max(0,Math.round(m/70*255)));o[r+3]=Math.min(o[r+3],j)}d.putImageData(u,0,0);const O=await new Promise(r=>p.toBlob(r,"image/png"));h(O);const te=URL.createObjectURL(O);w(te),await U(O,c)},v=s.useCallback(t=>{if(!R||!S.current)return;const a=S.current.getBoundingClientRect(),l=t.touches?t.touches[0].clientX:t.clientX;F(Math.min(100,Math.max(0,(l-a.left)/a.width*100)))},[R]);return s.useEffect(()=>{if(!R)return;const t=()=>E(!1);return window.addEventListener("mousemove",v),window.addEventListener("touchmove",v,{passive:!0}),window.addEventListener("mouseup",t),window.addEventListener("touchend",t),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("touchmove",v),window.removeEventListener("mouseup",t),window.removeEventListener("touchend",t)}},[R,v]),e.jsxs(e.Fragment,{children:[e.jsx(ae,{title:"AI Background Remover - Remove BG Free Online",description:"Remove image backgrounds automatically with AI. Transparent PNG output or custom background. 100% private â€” runs in your browser.",canonical:"/bg-remover"}),e.jsx(re,{toolSlug:"bg-remover",title:"AI Background Remover",description:"Upload any photo â€” AI instantly removes the background. Choose custom background colors with live preview.",breadcrumb:"Background Remover",children:n?e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[x&&e.jsxs("div",{className:"bg-white rounded-2xl border border-purple-100 p-5 space-y-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-fuchsia-500 border-t-transparent rounded-full animate-spin flex-shrink-0"}),e.jsx("span",{className:"text-sm font-semibold text-slate-700",children:$})]}),e.jsxs("span",{className:"text-sm font-bold text-purple-600 tabular-nums",children:[Math.round(P),"%"]})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-fuchsia-500 to-purple-500 transition-all duration-700",style:{width:`${P}%`}})}),e.jsx("p",{className:"text-xs text-slate-400 text-center",children:"First run downloads AI model (~10-30s). After that it's instant."})]}),W&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-circle-exclamation text-red-500 text-lg mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-red-700",children:W}),e.jsx("button",{onClick:M,className:"text-xs text-red-600 underline hover:text-red-800 mt-1",children:"Try again"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:i?"â† Original / Result â†’ (drag slider)":x?"â³ AI Processing...":"Ready"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{var t;return(t=b.current)==null?void 0:t.click()},className:"text-xs text-blue-600 font-medium hover:underline",children:[e.jsx("i",{className:"fas fa-folder-open mr-1"}),"Change"]}),e.jsxs("button",{onClick:()=>{T(null),h(null),g(null)},className:"text-xs text-red-400 hover:text-red-600",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Remove"]})]}),e.jsx("input",{ref:b,type:"file",accept:"image/*",className:"hidden",onChange:t=>D(t.target.files[0])})]}),e.jsxs("div",{ref:S,className:"relative select-none overflow-hidden",style:{minHeight:380,cursor:i?"col-resize":"default",...G},onMouseDown:()=>i&&E(!0),onTouchStart:()=>i&&E(!0),children:[e.jsx("img",{src:n.url,alt:"Original",className:"absolute inset-0 w-full h-full object-contain pointer-events-none"}),i&&e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{clipPath:`inset(0 0 0 ${z}%)`},children:[e.jsx("div",{className:"absolute inset-0",style:ne(c)}),e.jsx("img",{src:i,alt:"Result",className:"absolute inset-0 w-full h-full object-contain"})]}),i&&e.jsxs("div",{className:"absolute top-0 bottom-0 z-20 pointer-events-none",style:{left:`${z}%`},children:[e.jsx("div",{className:"absolute inset-y-0 -translate-x-px w-0.5 bg-white shadow-[0_0_12px_rgba(168,85,247,0.8)]"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-10 h-10 bg-white rounded-full shadow-2xl flex items-center justify-center border-2 border-purple-100",children:e.jsx("i",{className:"fas fa-arrows-left-right text-purple-500 text-xs"})})]}),e.jsx("div",{className:"absolute top-3 left-3 z-10 bg-black/60 backdrop-blur-sm text-white text-[11px] font-bold px-2.5 py-1 rounded-lg pointer-events-none",children:"ORIGINAL"}),i&&e.jsx("div",{className:"absolute top-3 right-3 z-10 bg-purple-600/90 backdrop-blur-sm text-white text-[11px] font-bold px-2.5 py-1 rounded-lg pointer-events-none",children:"âœ¨ BG REMOVED"}),x&&e.jsx("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-7 flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative w-14 h-14",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-purple-300/30"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-fuchsia-400 animate-spin"}),e.jsx("div",{className:"absolute inset-2 rounded-full border-4 border-transparent border-t-purple-300 animate-spin",style:{animationDirection:"reverse",animationDuration:"0.7s"}})]}),e.jsx("p",{className:"text-white font-bold text-sm text-center",children:$}),e.jsx("div",{className:"w-40 bg-white/20 rounded-full h-1.5",children:e.jsx("div",{className:"h-1.5 bg-white rounded-full transition-all",style:{width:`${P}%`}})})]})})]}),e.jsxs("div",{className:"px-4 py-2 bg-slate-50 border-t border-slate-100 flex items-center justify-between text-xs text-slate-500",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-image mr-1"}),n.file.name]}),e.jsxs("span",{children:[(n.file.size/1024/1024).toFixed(2)," MB"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 space-y-3",children:[e.jsxs("h3",{className:"font-bold text-slate-800 text-sm flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-palette text-purple-500"}),"Background Color"]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:le.map(t=>e.jsx("button",{onClick:()=>B(t.id),title:t.label,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all hover:scale-105 ${c===t.id?"border-purple-500 scale-105 shadow-md":"border-transparent hover:border-slate-300"}`,style:t.id==="transparent"?G:{backgroundColor:t.id},children:c===t.id&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:e.jsx("i",{className:"fas fa-check text-white text-xs drop-shadow-lg"})})},t.id))}),e.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[e.jsx("span",{className:"text-xs text-slate-500 font-medium flex-shrink-0",children:"Custom:"}),e.jsxs("label",{className:"relative",style:{cursor:"pointer"},children:[e.jsx("input",{type:"color",value:k,onChange:t=>J(t.target.value),className:"absolute inset-0 opacity-0 w-full h-full cursor-pointer"}),e.jsx("div",{className:"w-9 h-9 rounded-lg border-2 border-slate-200",style:{backgroundColor:k}})]}),e.jsx("button",{onClick:()=>B(k),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${c===k?"bg-purple-100 text-purple-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Apply Custom"})]})]}),e.jsx("button",{onClick:()=>{h(null),w(null),g(null),M()},disabled:x,className:"w-full py-3 bg-gradient-to-r from-fuchsia-600 to-purple-600 hover:from-fuchsia-700 hover:to-purple-700 disabled:opacity-50 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-rotate"}),"Re-Process with AI"]})}),e.jsxs("button",{onClick:()=>{var t;return(t=b.current)==null?void 0:t.click()},className:"w-full py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-medium rounded-xl transition-all flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-plus"}),"Upload New Image"]}),i&&!x&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("a",{href:q,download:`removed-bg-${n.file.name.replace(/\.[^.]+$/,"")}.png`,className:"flex items-center justify-center gap-2 w-full py-3.5 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-green-500/25 text-sm",children:[e.jsx("i",{className:"fas fa-download"}),"Download Transparent PNG"]}),c!=="transparent"&&e.jsxs("a",{href:i,download:`bg-replaced-${n.file.name.replace(/\.[^.]+$/,"")}.jpg`,className:"flex items-center justify-center gap-2 w-full py-3 bg-slate-700 hover:bg-slate-800 text-white font-bold rounded-xl text-sm transition-all",children:[e.jsx("i",{className:"fas fa-image"}),"Download With Background"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-purple-50 rounded-xl p-4 text-xs space-y-1.5 border border-purple-100",children:[e.jsx("p",{className:"font-bold text-slate-700 mb-2",children:"ðŸ”’ 100% Private"}),e.jsxs("p",{className:"text-slate-500",children:[e.jsx("i",{className:"fas fa-microchip mr-1.5 text-purple-500"}),"AI model runs in your browser"]}),e.jsxs("p",{className:"text-slate-500",children:[e.jsx("i",{className:"fas fa-ban mr-1.5 text-green-500"}),"No image sent to any server"]}),e.jsxs("p",{className:"text-slate-500",children:[e.jsx("i",{className:"fas fa-image mr-1.5 text-blue-500"}),"Output: lossless transparent PNG"]})]})]})]}):e.jsxs("div",{className:`drop-zone group cursor-pointer ${V?"active":""}`,style:{padding:"3.5rem 2rem"},onDrop:t=>{t.preventDefault(),L(!1),D(t.dataTransfer.files[0])},onDragOver:t=>{t.preventDefault(),L(!0)},onDragLeave:()=>L(!1),onClick:()=>{var t;return(t=b.current)==null?void 0:t.click()},children:[e.jsx("input",{ref:b,type:"file",accept:"image/*",className:"hidden",onChange:t=>D(t.target.files[0])}),e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-fuchsia-500 via-purple-600 to-indigo-600 flex items-center justify-center shadow-2xl shadow-purple-500/40 group-hover:scale-110 transition-transform duration-300",children:e.jsx("i",{className:"fas fa-scissors text-white text-4xl"})}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-green-400 text-white text-[9px] font-bold px-2 py-0.5 rounded-full shadow animate-pulse",children:"AI"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-extrabold text-slate-800",children:"Remove Background Instantly"}),e.jsxs("p",{className:"text-slate-400 text-sm mt-1.5",children:["Drop any photo â€” AI removes background ",e.jsx("span",{className:"text-purple-600 font-semibold",children:"automatically"})]})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["ðŸ‘¤ Portraits","ðŸ›ï¸ Products","ðŸ¾ Animals","ðŸŒ¸ Plants","ðŸš— Objects"].map(t=>e.jsx("span",{className:"text-xs bg-slate-50 border border-slate-200 text-slate-600 px-3 py-1 rounded-full font-medium",children:t},t))}),e.jsxs("button",{className:"px-8 py-3 bg-gradient-to-r from-fuchsia-600 to-purple-600 text-white font-bold rounded-full shadow-lg shadow-purple-500/30 hover:scale-105 transition-transform text-sm",children:[e.jsx("i",{className:"fas fa-upload mr-2"}),"Upload Image"]}),e.jsx("p",{className:"text-xs text-slate-400",children:"JPG, PNG, WebP Â· 100% private â€” no server upload"})]})]})})]})}export{ue as default};
