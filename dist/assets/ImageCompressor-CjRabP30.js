const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-BjKrJJcn.js","assets/index-CCmJMWXG.js","assets/index-BXoBAPKf.css"])))=>i.map(i=>d[i]);
import{r as o,j as e,_ as J}from"./index-CCmJMWXG.js";import{S as X}from"./SEO-Dq0iYSMN.js";import{T as Q}from"./ToolLayout-BRO4M_A0.js";import"./toolsData-IDNgvhJl.js";const Z=[{label:"Light",quality:85,desc:"Minimal loss",icon:"fa-feather",color:"text-green-500"},{label:"Balanced",quality:65,desc:"Good balance",icon:"fa-scale-balanced",color:"text-blue-500"},{label:"Maximum",quality:40,desc:"Smallest size",icon:"fa-compress",color:"text-amber-500"}],F=[{id:"original",label:"Keep Original",mime:null},{id:"jpg",label:"JPG",mime:"image/jpeg"},{id:"webp",label:"WebP",mime:"image/webp"},{id:"png",label:"PNG",mime:"image/png"}];function ee(){const[c,p]=o.useState([]),[l,f]=o.useState([]),[d,z]=o.useState(75),[u,L]=o.useState("original"),[j,P]=o.useState(!1),[v,M]=o.useState(0),[T,N]=o.useState(!1),[m,b]=o.useState(null),[R,$]=o.useState(50),[O,h]=o.useState(!1),w=o.useRef(),y=o.useRef(),x=s=>s<1024?`${s} B`:s<1048576?`${(s/1024).toFixed(1)} KB`:`${(s/1048576).toFixed(2)} MB`,q=s=>{var t;return u!=="original"?(t=F.find(a=>a.id===u))==null?void 0:t.mime:s.type==="image/png"?"image/png":s.type==="image/webp"?"image/webp":"image/jpeg"},B=s=>u!=="original"?u:s.type==="image/png"?"png":s.type==="image/webp"?"webp":"jpg",I=o.useCallback(s=>{const t=Array.from(s).filter(a=>a.type.startsWith("image/"));p(a=>[...a,...t.map(r=>({file:r,preview:URL.createObjectURL(r),name:r.name,size:r.size}))]),f([]),b(null)},[]),U=async()=>{if(!c.length)return;P(!0),M(0);const s=[];for(let t=0;t<c.length;t++){const a=c[t];try{const r=new Image;r.src=a.preview,await new Promise(k=>{r.onload=k});const n=document.createElement("canvas");n.width=r.naturalWidth,n.height=r.naturalHeight;const i=n.getContext("2d"),g=q(a.file);g==="image/jpeg"&&(i.fillStyle="#ffffff",i.fillRect(0,0,n.width,n.height)),i.drawImage(r,0,0);const S=await new Promise(k=>n.toBlob(k,g,d/100)),G=a.name.replace(/\.[^.]+$/,""),W=B(a.file);s.push({url:URL.createObjectURL(S),preview:a.preview,name:`${G}_compressed.${W}`,originalSize:a.size,compressedSize:S.size,width:n.width,height:n.height,savedPct:Math.round((1-S.size/a.size)*100)})}catch(r){s.push({error:!0,name:a.name,message:r.message})}M(Math.round((t+1)/c.length*100))}f(s),P(!1)},A=async()=>{const s=l.filter(i=>!i.error);if(s.length===1){const i=document.createElement("a");i.href=s[0].url,i.download=s[0].name,i.click();return}const t=(await J(async()=>{const{default:i}=await import("./jszip.min-BjKrJJcn.js").then(g=>g.j);return{default:i}},__vite__mapDeps([0,1,2]))).default,a=new t;for(const i of s){const g=await fetch(i.url);a.file(i.name,await g.blob())}const r=await a.generateAsync({type:"blob"}),n=document.createElement("a");n.href=URL.createObjectURL(r),n.download="compressed_images.zip",n.click()},C=l.reduce((s,t)=>s+(t.originalSize||0),0),_=l.reduce((s,t)=>s+(t.compressedSize||0),0),D=C>0?Math.round((1-_/C)*100):0,E=o.useCallback(s=>{if(!O||!y.current)return;const t=y.current.getBoundingClientRect(),a=s.touches?s.touches[0].clientX:s.clientX;$(Math.min(100,Math.max(0,(a-t.left)/t.width*100)))},[O]);return e.jsxs(e.Fragment,{children:[e.jsx(X,{title:"Image Compressor - Reduce File Size Free Online",description:"Compress images without losing quality. Supports JPG, PNG, WebP. Batch compression with visual comparison. 100% private.",canonical:"/image-compressor"}),e.jsx(Q,{toolSlug:"image-compressor",title:"Image Compressor",description:"Reduce image file size while maintaining quality. Batch compress with before/after comparison.",breadcrumb:"Image Compressor",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:`drop-zone group cursor-pointer ${T?"active":""}`,onDrop:s=>{s.preventDefault(),N(!1),I(s.dataTransfer.files)},onDragOver:s=>{s.preventDefault(),N(!0)},onDragLeave:()=>N(!1),onClick:()=>{var s;return(s=w.current)==null?void 0:s.click()},children:[e.jsx("input",{ref:w,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:s=>I(s.target.files)}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-orange-400 to-rose-500 flex items-center justify-center shadow-lg shadow-orange-500/20 group-hover:scale-110 transition-transform",children:e.jsx("i",{className:"fas fa-compress text-white text-2xl"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-lg font-bold text-slate-700",children:["Drop images to compress or ",e.jsx("span",{className:"text-blue-600",children:"browse"})]}),e.jsx("p",{className:"text-slate-400 text-sm mt-0.5",children:"JPG, PNG, WebP supported · Batch processing"})]})]})]}),c.length>0&&!l.length&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h3",{className:"font-bold text-slate-700 text-sm",children:[c.length," image",c.length>1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{var s;return(s=w.current)==null?void 0:s.click()},className:"text-xs text-blue-600 font-medium",children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add"]}),e.jsxs("button",{onClick:()=>{p([]),f([])},className:"text-xs text-red-400 hover:text-red-600",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Clear"]})]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:c.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-slate-50 rounded-lg",children:[e.jsx("img",{src:s.preview,alt:"",className:"w-10 h-10 rounded-lg object-cover border border-slate-200 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-slate-700 truncate font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-slate-400",children:x(s.size)})]}),e.jsx("button",{onClick:()=>p(a=>a.filter((r,n)=>n!==t)),className:"text-slate-400 hover:text-red-500 text-xs",children:e.jsx("i",{className:"fas fa-xmark"})})]},t))})]}),j&&e.jsxs("div",{className:"bg-white rounded-xl border border-orange-100 p-5 space-y-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Compressing..."})]}),e.jsxs("span",{className:"text-sm font-bold text-orange-600",children:[v,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:e.jsx("div",{className:"h-2.5 rounded-full bg-gradient-to-r from-orange-400 to-rose-500 transition-all",style:{width:`${v}%`}})})]}),l.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-green-50 border-b border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-circle-check text-green-500"}),e.jsxs("span",{className:"font-bold text-green-800 text-sm",children:[l.filter(s=>!s.error).length," compressed"]}),D>0&&e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 font-bold px-2 py-0.5 rounded-full",children:[x(C-_)," saved (",D,"%)"]})]}),e.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-xs font-bold transition-all",children:[e.jsx("i",{className:"fas fa-download"}),l.filter(s=>!s.error).length>1?"Download All (ZIP)":"Download"]})]}),e.jsx("div",{className:"divide-y divide-slate-100",children:l.map((s,t)=>!s.error&&e.jsxs("div",{className:"flex items-center gap-4 px-4 py-3 hover:bg-slate-50 transition-colors",children:[e.jsx("img",{src:s.url,alt:"",className:"w-12 h-12 object-cover rounded-lg border border-slate-200 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"text-xs text-slate-400 line-through",children:x(s.originalSize)}),e.jsx("i",{className:"fas fa-arrow-right text-[8px] text-slate-300"}),e.jsx("span",{className:"text-xs text-green-600 font-bold",children:x(s.compressedSize)}),e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded-full ${s.savedPct>0?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:s.savedPct>0?`−${s.savedPct}%`:`+${Math.abs(s.savedPct)}%`})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>{b(t),$(50)},className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx("i",{className:"fas fa-eye mr-1"}),"Compare"]}),e.jsxs("a",{href:s.url,download:s.name,className:"px-3 py-1.5 bg-blue-50 hover:bg-blue-600 hover:text-white text-blue-600 text-xs font-bold rounded-lg transition-all",children:[e.jsx("i",{className:"fas fa-download mr-1"}),"Save"]})]})]},t))})]}),m!==null&&l[m]&&!l[m].error&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-slate-50 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"← Original / Compressed → (drag to compare)"}),e.jsxs("button",{onClick:()=>b(null),className:"text-xs text-slate-400 hover:text-slate-600",children:[e.jsx("i",{className:"fas fa-xmark mr-1"}),"Close"]})]}),e.jsxs("div",{ref:y,className:"relative select-none overflow-hidden bg-slate-100",style:{minHeight:300,cursor:"col-resize"},onMouseDown:()=>h(!0),onTouchStart:()=>h(!0),onMouseMove:E,onTouchMove:E,onMouseUp:()=>h(!1),onTouchEnd:()=>h(!1),onMouseLeave:()=>h(!1),children:[e.jsx("img",{src:l[m].preview,alt:"Original",className:"absolute inset-0 w-full h-full object-contain pointer-events-none"}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{clipPath:`inset(0 ${100-R}% 0 0)`},children:[e.jsx("div",{className:"absolute inset-0 bg-slate-100"}),e.jsx("img",{src:l[m].url,alt:"Compressed",className:"absolute inset-0 w-full h-full object-contain"})]}),e.jsxs("div",{className:"absolute top-0 bottom-0 z-20 pointer-events-none",style:{left:`${R}%`},children:[e.jsx("div",{className:"absolute inset-y-0 -translate-x-px w-0.5 bg-white shadow-lg"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-9 h-9 bg-white rounded-full shadow-xl flex items-center justify-center border-2 border-orange-100",children:e.jsx("i",{className:"fas fa-arrows-left-right text-orange-500 text-xs"})})]}),e.jsxs("div",{className:"absolute top-3 left-3 z-10 bg-black/60 text-white text-[10px] font-bold px-2 py-1 rounded-lg pointer-events-none",children:["ORIGINAL · ",x(l[m].originalSize)]}),e.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-orange-600/90 text-white text-[10px] font-bold px-2 py-1 rounded-lg pointer-events-none",children:["COMPRESSED · ",x(l[m].compressedSize)]})]})]}),l.length>0&&e.jsxs("button",{onClick:()=>{p([]),f([]),b(null)},className:"w-full py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-600 text-sm font-medium rounded-xl transition-all",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Compress More Images"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 space-y-4",children:[e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-gear text-orange-500"})," Compression Settings"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:"Quick Presets"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Z.map(s=>e.jsxs("button",{onClick:()=>z(s.quality),className:`py-2.5 rounded-xl text-center transition-all ${d===s.quality?"bg-orange-500 text-white shadow-md shadow-orange-500/20":"bg-slate-50 hover:bg-orange-50 text-slate-600"}`,children:[e.jsx("i",{className:`fas ${s.icon} ${d===s.quality?"text-white":s.color} text-sm mb-0.5`}),e.jsx("p",{className:"text-xs font-bold",children:s.label}),e.jsx("p",{className:"text-[10px] opacity-75",children:s.desc})]},s.label))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex justify-between text-xs font-medium text-slate-600 mb-2",children:[e.jsx("span",{children:"Quality"}),e.jsxs("span",{className:`font-bold ${d>=80?"text-green-600":d>=50?"text-amber-600":"text-red-500"}`,children:[d,"%"]})]}),e.jsx("input",{type:"range",min:"10",max:"100",value:d,onChange:s=>z(+s.target.value),className:"slider-range w-full"}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mt-1",children:[e.jsx("span",{children:"Maximum compression"}),e.jsx("span",{children:"Maximum quality"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:"Output Format"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:F.map(s=>e.jsx("button",{onClick:()=>L(s.id),className:`py-2 rounded-lg text-xs font-bold transition-all ${u===s.id?"bg-blue-600 text-white":"bg-slate-50 text-slate-600 hover:bg-blue-50"}`,children:s.label},s.id))})]}),e.jsx("button",{onClick:U,disabled:!c.length||j,className:"w-full py-3.5 bg-gradient-to-r from-orange-500 to-rose-500 hover:from-orange-600 hover:to-rose-600 disabled:opacity-50 text-white font-bold rounded-xl transition-all shadow-lg shadow-orange-500/20 flex items-center justify-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})," Compressing ",v,"%"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-compress"})," Compress ",c.length>1?`${c.length} Images`:"Image"]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-rose-50 rounded-xl border border-orange-100 p-4 space-y-2",children:[e.jsxs("h4",{className:"font-bold text-slate-700 text-sm",children:[e.jsx("i",{className:"fas fa-bolt text-orange-500 mr-2"}),"Features"]}),["Batch compress multiple images","Visual before/after comparison","Output format selection","Download all as ZIP","100% browser-based — no uploads"].map(s=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[e.jsx("i",{className:"fas fa-check text-green-500 flex-shrink-0"})," ",s]},s))]})]})]})})]})}export{ee as default};
